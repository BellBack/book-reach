{"version":3,"sources":["components/BookImg.js","img/exit.svg","components/BookItems.js","img/load-more-arrow.svg","components/LoadMoreBtn.js","img/loupe-search.svg","api/BaseApi.js","bookSlice.js","api/BooksApi.js","img/preloader.gif","components/Preloader.js","components/SearchInput.js","App.js","store.js","index.js"],"names":["BookImg","src","title","alt","className","BookItems","books","setView","categorie","allResults","useState","viewBook","setViewBook","allRes","book","find","item","id","volumeInfo","category","categories","description","imageLinks","smallThumbnail","Thumbnail","console","log","authors","class","exitImg","onClick","map","i","viewBtnClick","type","etag","LoadMoreBtn","getMoreBooks","loadImg","BaseApi","response","a","status","Error","json","url","params","options","method","headers","body","fetch","this","checkStatus","initialState","booksState","isLoadingBooks","errorStatus","errorMessage","bookSlice","createSlice","name","reducers","setLoading","state","payload","setBooks","setError","message","setDefState","setAllResults","booksSliceActions","actions","BooksApi","baseURL","dispatch","myFetch","items","totalItems","Preloader","isLoading","preloaderImg","SearchInput","useDispatch","lastIndex","setLastIndex","query","setQuery","setCategory","categoryQ","setCategoryQ","sortingBy","setSortingBy","useSelector","onSubmit","e","preventDefault","getBooksByParams","placeholder","onChange","event","target","value","loupeImg","App","store","configureStore","reducer","render","document","getElementById"],"mappings":"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","file":"static/js/main.fb907028.chunk.js","sourcesContent":["export default function BookImg({ src, title }) {\n  return src ? (\n    <img src={src} alt=\"bookImg\" />\n  ) : (\n    <div className=\"divImgCloser\">\n      <span className=\"divImgCloser__text\">{title}</span>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/exit.2b87ced8.svg\";","import { useState } from \"react\";\nimport BookImg from \"./BookImg\";\nimport \"../css/BookItems.css\"\nimport exitImg  from '../img/exit.svg'\n\nexport default function BookItems ({ books, categorie, setView, allResults})  {\n  const [viewBook, setViewBook] = useState(\"\");\n  const allRes = allResults>0 ? `All results : ${allResults}` : null;\n\n  function viewBtnClick(id) {\n    setViewBook(id);\n    setView(id);\n  }\n\n  function viewBtnBackClick(id) {\n    setViewBook(\"\");\n    setView(\"\");\n  }\n\n  if (!books) return null \n\n  if (viewBook) {\n    let item = books.find((item) => item.id === viewBook);\n\n    const book = item.volumeInfo;\n    let src = null;\n    let category = book.categories ? \"[\" + book.categories + \"]\" : null;\n    let description = typeof book.description == 'undefined' \n      ? \"Sorry, this book has no description\" \n      : book.description;\n    src = book?.imageLinks?.smallThumbnail || book?.imageLinks?.Thumbnail\n    console.log(book);\n    return (\n      <div className=\"view-book\">\n        <div className=\"view-book__img-conteiner\">\n          <div className=\"view-book__img-item\">\n            <BookImg src={src} title={book.title} />\n          </div>\n          <div className=\"view-book__text-item\">\n            <p className=\"title\">{book.title}</p>\n            <p className=\"authors\">{book.authors}</p>\n          </div>\n         \n        </div>\n        <div className=\"view-book__text-conteiner\">\n          <span className=\"categories\">{category}</span>\n          <p className=\"view-book__description\">{description}</p>\n          <img class=\"view-book__exit\" src={exitImg}  onClick={viewBtnBackClick}></img>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <>\n      {allRes}\n        <ul className=\"books-list\">\n          {books.map((item, i) => {\n            const book = item.volumeInfo;\n            \n            let src = null;\n            let category = book.categories ? \"[\" + book.categories + \"]\" : null;\n            let id = item.id;\n\n            src = book?.imageLinks?.smallThumbnail || book?.imageLinks?.Thumbnail\n\n            return (\n              <li className=\"books-list__item\" key={item.etag}>\n                <button\n                  onClick={() => viewBtnClick(id)}\n                  className=\"bookViuweBtn\"\n                  type=\"button\"\n                >\n                  <div>\n                    <BookImg src={src} title={book.title} />\n                    <p className=\"categories\">{category}</p>\n                    <p className=\"title\">{book.title}</p>\n                  </div>\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n\n      \n    </>\n  );\n}; \n","export default __webpack_public_path__ + \"static/media/load-more-arrow.7f4c9330.svg\";","import loadImg from \"../img/load-more-arrow.svg\"\n\nconst LoadMoreBtn = ({ books, getMoreBooks, viewBook }) => {\n  if (books[1]) {\n    if (!viewBook) {\n      return <img class=\"LoadMoreBtn\" onClick={getMoreBooks} src={loadImg}></img>;\n    } else return null;\n  } else return null;\n};\n\nexport default LoadMoreBtn;\n\n","export default __webpack_public_path__ + \"static/media/loupe-search.efbb0947.svg\";","export default class BaseApi {\n\n  async checkStatus(response) {\n    try {\n      if (response.status !== 200) {\n        // const json = await response.json();\n        throw new Error();\n      }\n      return await response.json();\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  async myFetch(url, params = {}) {\n    const options = {\n      method: params.method || \"GET\",\n      headers: {\n        ...params.headers,\n      },\n\n      body: params.body,\n    };\n    const response = await fetch(url, options);\n    return await this.checkStatus(response);\n  }\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  booksState: {\n    books: [],\n    isLoadingBooks: false,\n    errorStatus: false, \n    errorMessage: \"\",\n    allResults: 0,\n  },\n  \n};\n\nconst bookSlice = createSlice({\n  name: \"bookSlice\",\n  initialState,\n  reducers: {\n    setLoading(state, { payload }) {\n      state.booksState.isLoadingBooks = payload;\n    },\n    setBooks(state, { payload }) {\n      state.booksState.books = [...state.booksState.books, ...payload];\n      \n    },\n    setError(state, { payload }) {\n      const { message, status } = payload;\n      state.booksState.errorMessage = message;\n      state.booksState.errorStatus = status;\n    },\n    setDefState(state) {\n      state.booksState = initialState.booksState;\n    },\n    setAllResults(state, { payload }) {\n      state.booksState.allResults = payload;\n    }\n  },\n});\n\nexport const booksSliceActions = bookSlice.actions;\n\nexport default bookSlice.reducer;\n","import BaseApi from \"./BaseApi\";\nimport { booksSliceActions } from \"../bookSlice\";\n\nclass BooksApi extends BaseApi {\n  baseURL = \"https://www.googleapis.com/books/v1/volumes?\";\n\n  getBooksByParams(params) {\n    return async (dispatch) => {\n      try {\n        dispatch(booksSliceActions.setLoading(true));\n\n        const url = `${this.baseURL}${params}`;\n\n        const { items, totalItems } = await this.myFetch(url);\n\n        dispatch(booksSliceActions.setAllResults(totalItems))\n        dispatch(booksSliceActions.setBooks(items));\n      } catch (e) {\n        dispatch(\n          booksSliceActions.setError({ status: true, message: e.message })\n        );\n      } finally {\n        dispatch(booksSliceActions.setLoading(false));\n      }\n    };\n  }\n  setDefState() {\n    return (dispatch) => dispatch(booksSliceActions.setDefState());\n  }\n}\n\nexport default new BooksApi();\n","export default __webpack_public_path__ + \"static/media/preloader.357ae8b6.gif\";","import preloaderImg from '../img/preloader.gif'\n\nconst Preloader = ({isLoading}) => {\n  console.log(isLoading + ' preloader')\n  return isLoading ? <img className=\"preloader\" src={preloaderImg} alt=\"preloader\"/> : null\n};\n\nexport default Preloader;","import { useState } from \"react\";\nimport BookItems from \"./BookItems\";\nimport \"../css/SearchInput.css\";\nimport LoadMoreBtn from \"./LoadMoreBtn\";\nimport loupeImg from '../img/loupe-search.svg'\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport BooksApi from \"../api/BooksApi\";\nimport Preloader from \"./Preloader\";\n\nexport default function SearchInput() {\n  const dispatch = useDispatch();\n  const [lastIndex, setLastIndex] = useState(30);\n  const [query, setQuery] = useState(\"\");\n  const [category, setCategory] = useState(\"all\");\n  const [categoryQ, setCategoryQ] = useState(\"\");\n  const [sortingBy, setSortingBy] = useState(\"relevance\");\n  const [viewBook, setViewBook] = useState(\"\");\n\n  const { books, isLoadingBooks, errorStatus, errorMessage, allResults } = useSelector(\n    (state) => state.bookSlice.booksState\n  );\n\n  const handleInputChange = (event) => setQuery(event.target.value);\n\n  const sortingChange = (event) => setSortingBy(event.target.value);\n\n  console.log(isLoadingBooks)\n\n  const getBooks = (e) => {\n    e.preventDefault();\n    dispatch(BooksApi.setDefState());\n    let params = `q=${query}+intitle:${query}${categoryQ}&orderBy=${sortingBy}&maxResults=30`;\n    dispatch(BooksApi.getBooksByParams(params));\n  };\n\n  const getMoreBooks = () => {\n    let params = `q=${query}+intitle:${query}${categoryQ}&orderBy=${sortingBy}&maxResults=30&startIndex=${lastIndex}`\n    dispatch(BooksApi.getBooksByParams(params));\n    setLastIndex(lastIndex + 31);\n  };\n\n  function categoryChange(event) {\n    setCategory(event.target.value);\n    event.target.value === \"all\"\n      ? setCategoryQ(\"\")\n      : setCategoryQ(\"+subject:\" + event.target.value);\n  }\n  return (\n    <div className=\"search\">\n      <div className=\"search__container\">\n        <form className=\"search__form\" onSubmit={getBooks}>\n          <div className=\"search__form-input\">\n            <input\n              type=\"text\"\n              placeholder=\"Search of books...\"\n              className=\"search__input\"\n              onChange={handleInputChange}\n              value={query}\n            />\n            <input class=\"seach__loupe\" type=\"image\" src={loupeImg} alt=\"Submit\" />\n          </div>\n          <div>\n            <label>\n              Category:\n              <select value={sortingBy} onChange={sortingChange}>\n                <option value=\"relevance\">relevance</option>\n                <option value=\"newest\">newest</option>\n              </select>\n            </label>\n            <label>\n              Genre:\n              <select value={category} onChange={categoryChange}>\n                <option value=\"all\">all</option>\n                <option value=\"art\">art</option>\n                <option value=\"biography\">biography</option>\n                <option value=\"computers\">computers</option>\n                <option value=\"history\">history</option>\n                <option value=\"medical\">medical</option>\n                <option value=\"poetry\">poetry</option>\n              </select>\n            </label>\n          </div>\n        </form>\n      </div>\n      <Preloader isLoading={isLoadingBooks}/>\n      <BookItems books={books} category={category} setView={setViewBook} allResults={allResults}/>\n      <LoadMoreBtn\n        books={books}\n        getMoreBooks={getMoreBooks}\n        viewBook={viewBook}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport SearchInput from \"./components/SearchInput.js\";\nimport \"./css/App.css\";\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <SearchInput />\n    </div>\n  );\n}\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport bookSlice from \"./bookSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    bookSlice,\n  },\n});\n","import React from \"react\";\nimport App from \"./App\";\n\nimport { render } from \"react-dom\";\nimport \"./css/index.css\";\n\nimport { store } from \"./store\";\nimport { Provider } from \"react-redux\";\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}